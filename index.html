<!DOCTYPE html>
<html >
<head>
  <meta charset="utf-8">
  
  <title>Kingiol Ding</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <meta name="description" content="Kingiol Ding - 不作死就不会死.">
<meta property="og:type" content="website">
<meta property="og:title" content="Kingiol Ding">
<meta property="og:url" content="http://kingiol.github.io/index.html">
<meta property="og:site_name" content="Kingiol Ding">
<meta property="og:description" content="Kingiol Ding - 不作死就不会死.">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Kingiol Ding">
<meta name="twitter:description" content="Kingiol Ding - 不作死就不会死.">
  
    <link rel="alternative" href="/atom.xml" title="Kingiol Ding" type="application/atom+xml">
  
  
    <link rel="icon" href="/favicon.png">
  
  
      <link rel="stylesheet" href="//cdn.bootcss.com/animate.css/3.5.0/animate.min.css">
  
  
  
      <script src="//cdn.bootcss.com/pace/1.0.2/pace.min.js"></script>
      <link href="//cdn.bootcss.com/pace/1.0.2/themes/blue/pace-theme-minimal.css" rel="stylesheet">
  
  <link rel="stylesheet" href="/css/style.css">
  
      <style> .article { opacity: 0;} </style>
  
  <link rel="stylesheet" href="/font-awesome/css/font-awesome.min.css">
  <link rel="apple-touch-icon" href="/apple-touch-icon.png">
  
    
    
  
  
    <link rel="stylesheet" href="/fancybox/jquery.fancybox.css">
  
  <script src="//cdn.bootcss.com/jquery/1.9.1/jquery.min.js"></script>
  <script>
      var yiliaConfig = {
          fancybox: true,
          animate: true,
          isHome: true,
          isPost: false,
          isArchive: false,
          isTag: false,
          isCategory: false,
          open_in_new: false,
      }
  </script>

  
      <script>
          yiliaConfig.rootUrl = "/";
      </script>
  

  
</head>
<body>
  <div id="container">
    <div class="left-col">
    <div class="overlay"></div>
<div class="intrude-less">
    <header id="header" class="inner">
        <a href="/" class="profilepic">
            <img src="/images/avatar.png" class="animated zoomIn">
        </a>
        <hgroup>
          <h1 class="header-author"><a href="/">Kingiol</a></h1>
        </hgroup>

        
        <p class="header-subtitle">不作死就不会死.</p>
        
                


        
            <div id="switch-btn" class="switch-btn">
                <div class="icon">
                    <div class="icon-ctn">
                        <div class="icon-wrap icon-house" data-idx="0">
                            <div class="birdhouse"></div>
                            <div class="birdhouse_holes"></div>
                        </div>
                        <div class="icon-wrap icon-ribbon hide" data-idx="1">
                            <div class="ribbon"></div>
                        </div>
                        
                        <div class="icon-wrap icon-link hide" data-idx="2">
                            <div class="loopback_l"></div>
                            <div class="loopback_r"></div>
                        </div>
                        
                        
                    </div>
                    
                </div>
                <div class="tips-box hide">
                    <div class="tips-arrow"></div>
                    <ul class="tips-inner">
                        <li>菜单</li>
                        <li>标签</li>
                        
                        <li>友情链接</li>
                        
                        
                    </ul>
                </div>
            </div>
        

        <div id="switch-area" class="switch-area">
            <div class="switch-wrap">
                <section class="switch-part switch-part1">
                    <nav class="header-menu">
                        <ul>
                        
                            <li><a href="/">主页</a></li>
                        
                            <li><a href="/archives/">所有文章</a></li>
                        
                            <li><a href="/tags/">标签云</a></li>
                        
                            <li><a href="/about/">关于我</a></li>
                        
                        </ul>
                    </nav>
                    <nav class="header-nav">
                        <ul class="social">
                            
                                <li id="Email"><a class="Email" target="_blank" href="mailto:kingxiaokang@gmail.com" title="Email"></a></li>
                            
                                <li id="GitHub"><a class="GitHub" target="_blank" href="https://github.com/kingiol" title="GitHub"></a></li>
                            
                                <li id="RSS"><a class="RSS" target="_blank" href="/atom.xml" title="RSS"></a></li>
                            
                        </ul>
                    </nav>
                </section>
                
                
                <section class="switch-part switch-part2">
                    <div class="widget tagcloud" id="js-tagcloud">
                        <a href="/tags/Swift/" style="font-size: 10px;">Swift</a> <a href="/tags/Xcode/" style="font-size: 10px;">Xcode</a> <a href="/tags/iOS/" style="font-size: 20px;">iOS</a> <a href="/tags/产品/" style="font-size: 10px;">产品</a>
                    </div>
                </section>
                
                
                
                <section class="switch-part switch-part3">
                    <div id="js-friends">
                    
                      <a target="_blank" class="main-nav-link switch-friends-link" href="https://hexo.io">Hexo</a>
                    
                      <a target="_blank" class="main-nav-link switch-friends-link" href="https://pages.github.com/">GitHub</a>
                    
                      <a target="_blank" class="main-nav-link switch-friends-link" href="http://moxfive.xyz/">MOxFIVE</a>
                    
                    </div>
                </section>
                

                
            </div>
        </div>
    </header>                
</div>
    </div>
    <div class="mid-col">
      <nav id="mobile-nav">
      <div class="overlay">
          <div class="slider-trigger"></div>
          <h1 class="header-author js-mobile-header hide"><a href="/" title="回到主页">Kingiol</a></h1>
      </div>
    <div class="intrude-less">
        <header id="header" class="inner">
            <a href="/" class="profilepic">
                <img src="/images/avatar.png" class="animated zoomIn">
            </a>
            <hgroup>
              <h1 class="header-author"><a href="/" title="回到主页">Kingiol</a></h1>
            </hgroup>
            
            <p class="header-subtitle">不作死就不会死.</p>
            
            <nav class="header-menu">
                <ul>
                
                    <li><a href="/">主页</a></li>
                
                    <li><a href="/archives/">所有文章</a></li>
                
                    <li><a href="/tags/">标签云</a></li>
                
                    <li><a href="/about/">关于我</a></li>
                
                <div class="clearfix"></div>
                </ul>
            </nav>
            <nav class="header-nav">
                        <ul class="social">
                            
                                <li id="Email"><a class="Email" target="_blank" href="mailto:kingxiaokang@gmail.com" title="Email"></a></li>
                            
                                <li id="GitHub"><a class="GitHub" target="_blank" href="https://github.com/kingiol" title="GitHub"></a></li>
                            
                                <li id="RSS"><a class="RSS" target="_blank" href="/atom.xml" title="RSS"></a></li>
                            
                        </ul>
            </nav>
        </header>                
    </div>
</nav>
      <div class="body-wrap">
  
    <article id="post-What-You-Can-Do-to-Simplify-Your-Products" class="article article-type-post" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/2016/05/16/What-You-Can-Do-to-Simplify-Your-Products/" class="article-date">
      <time datetime="2016-05-16T10:33:49.000Z" itemprop="datePublished">2016-05-16</time>
</a>
    </div>
  
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2016/05/16/What-You-Can-Do-to-Simplify-Your-Products/">如何简化你的产品</a>
    </h1>
  

      </header>
      
    
    <div class="article-entry" itemprop="articleBody">
      
          
              <img src="/images/2016/05/16/simplify-products.jpg">
<p>产品从诞生之初，就是功能点的堆砌，并且随着产品生命周期的延续，功能的堆砌就会更加的明显。</p>
<p>过去的功能，不会再有人提及，只求功能能够正常运行就谢天谢地了。<br>
          
      
    </div>
    
    <div class="article-info article-info-index">
      
      

      
    <div class="article-tag tagcloud">
        <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/产品/">产品</a></li></ul>
    </div>

      
        <p class="article-more-link">
          <a href="/2016/05/16/What-You-Can-Do-to-Simplify-Your-Products/#more">more >></a>
        </p>
      
      <div class="clearfix"></div>
    </div>
    
  </div>
  
</article>








  
    <article id="post-ios-uibutton-double-click" class="article article-type-post" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/2015/03/02/ios-uibutton-double-click/" class="article-date">
      <time datetime="2015-03-02T14:44:00.000Z" itemprop="datePublished">2015-03-02</time>
</a>
    </div>
  
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2015/03/02/ios-uibutton-double-click/">iOS中UIButton实现双击操作</a>
    </h1>
  

      </header>
      
    
    <div class="article-entry" itemprop="articleBody">
      
          
        <p>我们在日常的开发过程中，一个UIButton可能需要承载许多的操作，用得最多的当然是单击的操作，但是有的时候，我们需要使用双击操作，而apple并没有提供封装的方法，所以，我们就自己来构建一个双击的操作示例:</p>
<figure class="highlight objc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">UIButton</span> * tabButton = [<span class="built_in">UIButton</span> buttonWithType:<span class="built_in">UIButtonTypeCustom</span>];</span><br><span class="line"></span><br><span class="line"><span class="comment">// 点击操作</span></span><br><span class="line">[tabButton addTarget:<span class="keyword">self</span> action:<span class="keyword">@selector</span>(tabButtonTapped:forEvent:) forControlEvents:<span class="built_in">UIControlEventTouchDown</span>];</span><br><span class="line"><span class="comment">// 双击操作</span></span><br><span class="line">[tabButton addTarget:<span class="keyword">self</span> action:<span class="keyword">@selector</span>(repeatBtnTapped:forEvent:) forControlEvents:<span class="built_in">UIControlEventTouchDownRepeat</span>];</span><br><span class="line">        </span><br><span class="line">- (<span class="keyword">void</span>)tabButtonTapped:(<span class="built_in">UIButton</span> *)sender forEvent:(<span class="built_in">UIEvent</span> *)event &#123;</span><br><span class="line">    [<span class="keyword">self</span> performSelector:<span class="keyword">@selector</span>(tabButtonTap:) withObject:sender afterDelay:<span class="number">0.2</span>];</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">- (<span class="keyword">void</span>)tabButtonTap:(<span class="built_in">UIButton</span> *)sender &#123;</span><br><span class="line">    <span class="built_in">NSLog</span>(<span class="string">@"单击操作"</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">- (<span class="keyword">void</span>)repeatBtnTapped:(<span class="built_in">UIButton</span> *)sender forEvent:(<span class="built_in">UIEvent</span> *)event &#123;</span><br><span class="line">    </span><br><span class="line">    [<span class="built_in">NSObject</span> cancelPreviousPerformRequestsWithTarget:<span class="keyword">self</span> selector:<span class="keyword">@selector</span>(tabButtonTap:) object:sender];</span><br><span class="line">    </span><br><span class="line">    <span class="built_in">NSLog</span>(<span class="string">@"双击操作"</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
      
    </div>
    
    <div class="article-info article-info-index">
      
      
    <div class="article-category tagcloud">
    <a class="article-category-link" href="/categories/iOS/">iOS</a>
    </div>


      
      
      <div class="clearfix"></div>
    </div>
    
  </div>
  
</article>








  
    <article id="post-xcode-your-account-already-has-a-valid-ios-distribution-certificate" class="article article-type-post" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/2015/02/07/xcode-your-account-already-has-a-valid-ios-distribution-certificate/" class="article-date">
      <time datetime="2015-02-07T14:16:00.000Z" itemprop="datePublished">2015-02-07</time>
</a>
    </div>
  
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2015/02/07/xcode-your-account-already-has-a-valid-ios-distribution-certificate/">xcode Archive 出现Your account already has a valid iOS distribution certificate警告</a>
    </h1>
  

      </header>
      
    
    <div class="article-entry" itemprop="articleBody">
      
          
              <p>在进行Xcode Archive进行Ad-hoc生成ipa包的时候，有时会出现<code>Your account already has a valid iOS distribution certificate</code>的警告框，如下图所以：</p>
<img src="/images/2015/02/07/xcode-your-account-already-has-a-valid-ios-distribution-certificate-0.png">
          
      
    </div>
    
    <div class="article-info article-info-index">
      
      
    <div class="article-category tagcloud">
    <a class="article-category-link" href="/categories/iOS/">iOS</a><a class="article-category-link" href="/categories/iOS/Xcode/">Xcode</a>
    </div>


      
    <div class="article-tag tagcloud">
        <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Xcode/">Xcode</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/iOS/">iOS</a></li></ul>
    </div>

      
        <p class="article-more-link">
          <a href="/2015/02/07/xcode-your-account-already-has-a-valid-ios-distribution-certificate/#more">more >></a>
        </p>
      
      <div class="clearfix"></div>
    </div>
    
  </div>
  
</article>








  
    <article id="post-swift-ninja-challenge" class="article article-type-post" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/2014/07/27/swift-ninja-challenge/" class="article-date">
      <time datetime="2014-07-26T23:53:00.000Z" itemprop="datePublished">2014-07-27</time>
</a>
    </div>
  
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2014/07/27/swift-ninja-challenge/">swift高级特性一瞥</a>
    </h1>
  

      </header>
      
    
    <div class="article-entry" itemprop="articleBody">
      
          
              <figure class="highlight objc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// Playground - noun: a place where people can play</span></span><br><span class="line"></span><br><span class="line">import <span class="built_in">UIKit</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 1</span></span><br><span class="line">func swap&lt;T&gt;(<span class="keyword">inout</span> a: T, <span class="keyword">inout</span> with b: T) &#123;</span><br><span class="line">    (a, b) = (b, a)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">var a = <span class="string">"Marin"</span>, b = <span class="string">"Todorov"</span></span><br><span class="line">swap(&amp;a, &amp;b)</span><br><span class="line">[a, b]</span><br></pre></td></tr></table></figure>
<figure class="highlight objc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 2</span></span><br><span class="line">func flexStrings(s1: String = <span class="string">""</span>, s2: String = <span class="string">""</span>) -&gt; String &#123;</span><br><span class="line">    <span class="keyword">return</span> s1 + s2 == <span class="string">""</span> ? <span class="string">"none"</span> : s1 + s2</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">flexStrings()</span><br><span class="line">flexStrings(s1: <span class="string">"hello"</span>)</span><br><span class="line">flexStrings(s1: <span class="string">"hello"</span>, s2: <span class="string">"world"</span>)</span><br></pre></td></tr></table></figure>
<figure class="highlight objc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 3</span></span><br><span class="line">func sumAny(anys: Any...) -&gt; String &#123;</span><br><span class="line">    <span class="keyword">return</span> String((anys.map(&#123;item <span class="keyword">in</span></span><br><span class="line">        <span class="keyword">switch</span> item &#123;</span><br><span class="line">        <span class="keyword">case</span> <span class="string">""</span> as String, <span class="number">0</span> as Int:</span><br><span class="line">            <span class="keyword">return</span> <span class="number">-10</span></span><br><span class="line">        <span class="keyword">case</span> let s as String where s.toInt() &gt; <span class="number">0</span>:</span><br><span class="line">            <span class="keyword">return</span> s.toInt()!</span><br><span class="line">        <span class="keyword">case</span> is Int:</span><br><span class="line">            <span class="keyword">return</span> item as Int</span><br><span class="line">        <span class="keyword">default</span>:</span><br><span class="line">            <span class="keyword">return</span> <span class="number">0</span></span><br><span class="line">        &#125;</span><br><span class="line">        &#125;) as [Int]).reduce(<span class="number">0</span>) &#123;</span><br><span class="line">            $<span class="number">0</span> + $<span class="number">1</span></span><br><span class="line">        &#125;)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">sumAny()</span><br><span class="line">sumAny(Double(), <span class="number">10</span>, <span class="string">"-10"</span>, <span class="number">2</span>)</span><br><span class="line">sumAny(<span class="string">"Marin Todorow"</span>, <span class="number">2</span>, <span class="number">22</span>, <span class="string">"-3"</span>, <span class="string">"10"</span>, <span class="string">""</span>, <span class="number">0</span>, <span class="number">33</span>, <span class="number">-5</span>)</span><br></pre></td></tr></table></figure>
          
      
    </div>
    
    <div class="article-info article-info-index">
      
      
    <div class="article-category tagcloud">
    <a class="article-category-link" href="/categories/iOS/">iOS</a><a class="article-category-link" href="/categories/iOS/Swift/">Swift</a>
    </div>


      
    <div class="article-tag tagcloud">
        <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Swift/">Swift</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/iOS/">iOS</a></li></ul>
    </div>

      
        <p class="article-more-link">
          <a href="/2014/07/27/swift-ninja-challenge/#more">more >></a>
        </p>
      
      <div class="clearfix"></div>
    </div>
    
  </div>
  
</article>








  
    <article id="post-interactive-between-objective-c-and-swift" class="article article-type-post" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/2014/06/04/interactive-between-objective-c-and-swift/" class="article-date">
      <time datetime="2014-06-04T09:34:00.000Z" itemprop="datePublished">2014-06-04</time>
</a>
    </div>
  
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2014/06/04/interactive-between-objective-c-and-swift/">Objective-C和Swift的交互操作</a>
    </h1>
  

      </header>
      
    
    <div class="article-entry" itemprop="articleBody">
      
          
              <img src="/images/2014/06/04/interactive-between-objective-c-and-swift-0.jpg">
<img src="/images/2014/06/04/interactive-between-objective-c-and-swift-1.jpg">
<p>伴随着WWDC2014,令无数的开发者又开始忙碌起来，不管Swift的评价到底怎么样，总是令人兴奋的，今天，我们就来讨论一下Objective-C和Swift的互相调用。</p>
          
      
    </div>
    
    <div class="article-info article-info-index">
      
      
    <div class="article-category tagcloud">
    <a class="article-category-link" href="/categories/iOS8/">iOS8</a>
    </div>


      
      
        <p class="article-more-link">
          <a href="/2014/06/04/interactive-between-objective-c-and-swift/#more">more >></a>
        </p>
      
      <div class="clearfix"></div>
    </div>
    
  </div>
  
</article>








  
    <article id="post-advanced-feature-of-gcd" class="article article-type-post" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/2014/04/20/advanced-feature-of-gcd/" class="article-date">
      <time datetime="2014-04-20T08:20:00.000Z" itemprop="datePublished">2014-04-20</time>
</a>
    </div>
  
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2014/04/20/advanced-feature-of-gcd/">GCD中的一些高级特性</a>
    </h1>
  

      </header>
      
    
    <div class="article-entry" itemprop="articleBody">
      
          
        <img src="/images/2014/04/20/advanced-feature-of-gcd-0.jpg">
<p>在开发中执行比较耗时的程序的时候，我们通常都是运用多线程的方式来处理的，在iOS的开发中我们可以使用GCD来处理，一旦用到了多线程就不可避免的会出现线程之间的锁的问题(死锁，读写锁，互斥锁等等)。下面我们就来谈谈在GCD中如何避免多线程操作的读写锁以前其他的一些特性。</p>
<h3 id="1-运用GCD避免读写锁导致线程安全问题"><a href="#1-运用GCD避免读写锁导致线程安全问题" class="headerlink" title="1.运用GCD避免读写锁导致线程安全问题"></a>1.运用GCD避免读写锁导致线程安全问题</h3><p>假设，我们有一个<code>DataManager</code>类，它用来管理整个程序中的数据，再操作的时候就会出现添加数据和读取数据的操作，如果在同一个时间点，两个线程同时要对数据进行添加操作的话，则就会发生操作错误的问题，为了解决这个我们运用到GCD中的barrier和sync操作:</p>
<figure class="highlight objc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">@interface</span> <span class="title">DataManager</span> ()</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">@property</span> (<span class="keyword">strong</span>, <span class="keyword">nonatomic</span>) <span class="built_in">NSMutableArray</span> *dataArray;</span><br><span class="line"><span class="keyword">@property</span> (<span class="keyword">strong</span>, <span class="keyword">nonatomic</span>) <span class="built_in">dispatch_queue_t</span> concurrentDataQueue;</span><br><span class="line"></span><br><span class="line"><span class="keyword">@end</span></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">@implementation</span> <span class="title">DataManager</span></span></span><br><span class="line"></span><br><span class="line">+ (instancetype)shareInstance &#123;</span><br><span class="line">    <span class="keyword">static</span> DataManager *dataManager = <span class="literal">nil</span>;</span><br><span class="line">    <span class="keyword">static</span> <span class="built_in">dispatch_once_t</span> onceToken;</span><br><span class="line">    <span class="built_in">dispatch_once</span>(&amp;onceToken, ^&#123;</span><br><span class="line">        dataManager = [[DataManager alloc] init];</span><br><span class="line">        dataManager.concurrentDataQueue = dispatch_queue_create(<span class="string">"com.kingiol.gcd.dataManagerQueue"</span>, DISPATCH_QUEUE_CONCURRENT);</span><br><span class="line">    &#125;);</span><br><span class="line">    <span class="keyword">return</span> dataManager;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">- (<span class="built_in">NSArray</span> *)data &#123;</span><br><span class="line">    __block <span class="built_in">NSArray</span> *returnData = <span class="literal">nil</span>;</span><br><span class="line">    <span class="built_in">dispatch_sync</span>(<span class="keyword">self</span>.concurrentDataQueue, ^&#123;</span><br><span class="line">        returnData = [_dataArray <span class="keyword">copy</span>];</span><br><span class="line">    &#125;);</span><br><span class="line">    <span class="keyword">return</span> returnData;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">- (<span class="keyword">void</span>)addData:(<span class="keyword">id</span>)data &#123;</span><br><span class="line">    <span class="keyword">if</span> (data) &#123;</span><br><span class="line">        dispatch_barrier_async(<span class="keyword">self</span>.concurrentDataQueue, ^&#123;</span><br><span class="line">            [_dataArray addObject:data];</span><br><span class="line">        &#125;);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">@end</span></span><br></pre></td></tr></table></figure>
<p>通过上述的代码就能够很好的处理多线程对dataArray数组的操作，并且不会出现读写锁的问题。</p>
<h3 id="2-运用GCD的group来监听一组并发是否运行结束"><a href="#2-运用GCD的group来监听一组并发是否运行结束" class="headerlink" title="2.运用GCD的group来监听一组并发是否运行结束"></a>2.运用GCD的group来监听一组并发是否运行结束</h3><p>如果当前有3张图片，我们需要从网络上面下载，然后全部下载完成之后，我们需要统一的提醒用户下载完成，这个时候因为每一个图片下载都是并发的，传统的方法是每一个线程各自都有一个bool变量，然后我们去魂环判断这么变量是不是都被置成已完成的状态。现在我们来运用GCD中的group特性来统一处理:</p>
<figure class="highlight objc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">dispatch_group_t downloadGroup = dispatch_group_create();</span><br><span class="line">    <span class="keyword">for</span> (<span class="built_in">NSInteger</span> i = <span class="number">0</span>; i &lt; <span class="number">3</span>; i++) &#123;</span><br><span class="line">        dispatch_group_enter(downloadGroup);</span><br><span class="line">        <span class="built_in">dispatch_async</span>(dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_DEFAULT, <span class="number">0</span>), ^&#123;</span><br><span class="line">           <span class="comment">//下载图片程序</span></span><br><span class="line">           <span class="comment">//在图片下载完成的block中调用:</span></span><br><span class="line">            dispatch_group_leave(downloadGroup);</span><br><span class="line">        &#125;);</span><br><span class="line">    &#125;</span><br><span class="line">    dispatch_group_notify(downloadGroup, dispatch_get_main_queue(), ^&#123;</span><br><span class="line">        <span class="built_in">UIAlertView</span> *alertView = [[<span class="built_in">UIAlertView</span> alloc] initWithTitle:<span class="literal">nil</span> message:<span class="string">@"全部下载完成"</span> delegate:<span class="literal">nil</span> cancelButtonTitle:<span class="string">@"cancel"</span> otherButtonTitles:<span class="literal">nil</span>, <span class="literal">nil</span>];</span><br><span class="line">        [alertView show];</span><br><span class="line">    &#125;);</span><br></pre></td></tr></table></figure>

      
    </div>
    
    <div class="article-info article-info-index">
      
      
    <div class="article-category tagcloud">
    <a class="article-category-link" href="/categories/iOS/">iOS</a>
    </div>


      
      
      <div class="clearfix"></div>
    </div>
    
  </div>
  
</article>








  
    <article id="post-fix-uitabbar-selectedimage-scale" class="article article-type-post" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/2014/04/13/fix-uitabbar-selectedimage-scale/" class="article-date">
      <time datetime="2014-04-13T03:25:00.000Z" itemprop="datePublished">2014-04-13</time>
</a>
    </div>
  
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2014/04/13/fix-uitabbar-selectedimage-scale/">处理UITabbar中选中图片变小的问题</a>
    </h1>
  

      </header>
      
    
    <div class="article-entry" itemprop="articleBody">
      
          
        <p>最近编写的UITabbarController中发现一个奇怪的问题，就选中一个tab之后，然后你继续点击这个tab,就会发现选中的图标逐渐的变小变小，最后能够消失。</p>
<p>修改之前的有关tabBarItem的设置:</p>
<figure class="highlight objc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">UIViewController</span> *controller = [[<span class="built_in">UIViewController</span> alloc] init];</span><br><span class="line">[controller.tabBarItem setImageInsets:<span class="built_in">UIEdgeInsetsMake</span>(<span class="number">1</span>, <span class="number">1</span>, <span class="number">1</span>, <span class="number">1</span>)];</span><br><span class="line">[controller.tabBarItem setTitle:<span class="string">@"首页"</span>];</span><br></pre></td></tr></table></figure>
<p>修改之后的有关tabBarItem的设置:</p>
<figure class="highlight objc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">UIViewController</span> *controller = [[<span class="built_in">UIViewController</span> alloc] init];</span><br><span class="line">[controller.tabBarItem setImageInsets:<span class="built_in">UIEdgeInsetsMake</span>(<span class="number">-1</span>, <span class="number">0</span>, <span class="number">1</span>, <span class="number">0</span>)];</span><br><span class="line">[controller.tabBarItem setTitle:<span class="string">@"首页"</span>];</span><br></pre></td></tr></table></figure>
<p>修改了tabBarItem的图片显示模式imageInsets就可以避免问题了。</p>

      
    </div>
    
    <div class="article-info article-info-index">
      
      
    <div class="article-category tagcloud">
    <a class="article-category-link" href="/categories/iOS/">iOS</a>
    </div>


      
      
      <div class="clearfix"></div>
    </div>
    
  </div>
  
</article>








  
    <article id="post-change-uitabbar-background" class="article article-type-post" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/2014/04/12/change-uitabbar-background/" class="article-date">
      <time datetime="2014-04-12T12:16:00.000Z" itemprop="datePublished">2014-04-12</time>
</a>
    </div>
  
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2014/04/12/change-uitabbar-background/">改变UITabBar的背景色</a>
    </h1>
  

      </header>
      
    
    <div class="article-entry" itemprop="articleBody">
      
          
        <p>默认的UITabBar的背景色是黑色的，我们有的时候需要设置一些自定的颜色，来达到自定义的要求，下面就来说说在iOS6和iOS7中如果进行设置的，下面设置背景色为白色:</p>
<h4 id="iOS6"><a href="#iOS6" class="headerlink" title="iOS6"></a>iOS6</h4><figure class="highlight objc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">CGRect</span> rect = <span class="built_in">CGRectMake</span>(<span class="number">0.0</span>f, <span class="number">0.0</span>f, <span class="number">1.0</span>f, <span class="number">1.0</span>f);</span><br><span class="line"><span class="built_in">UIGraphicsBeginImageContext</span>(rect.size);</span><br><span class="line"><span class="built_in">CGContextRef</span> context = <span class="built_in">UIGraphicsGetCurrentContext</span>();</span><br><span class="line"><span class="built_in">CGContextSetFillColorWithColor</span>(context, [[<span class="built_in">UIColor</span> whiteColor] <span class="built_in">CGColor</span>]);</span><br><span class="line">    <span class="built_in">CGContextFillRect</span>(context, rect);</span><br><span class="line"><span class="built_in">UIImage</span> *image = <span class="built_in">UIGraphicsGetImageFromCurrentImageContext</span>();</span><br><span class="line"><span class="built_in">UIGraphicsEndImageContext</span>();</span><br><span class="line"></span><br><span class="line"><span class="keyword">self</span>.tabBar.backgroundImage = image;</span><br></pre></td></tr></table></figure>
<h4 id="iOS7"><a href="#iOS7" class="headerlink" title="iOS7"></a>iOS7</h4><figure class="highlight objc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">UIView</span> *bgView = [[<span class="built_in">UIView</span> alloc] initWithFrame:<span class="keyword">self</span>.tabBar.bounds];</span><br><span class="line">bgView.backgroundColor = [<span class="built_in">UIColor</span> whiteColor];</span><br><span class="line">[<span class="keyword">self</span>.tabBar insertSubview:bgView atIndex:<span class="number">0</span>];</span><br><span class="line"><span class="keyword">self</span>.tabBar.opaque = <span class="literal">YES</span>;</span><br></pre></td></tr></table></figure>

      
    </div>
    
    <div class="article-info article-info-index">
      
      
    <div class="article-category tagcloud">
    <a class="article-category-link" href="/categories/iOS/">iOS</a>
    </div>


      
      
      <div class="clearfix"></div>
    </div>
    
  </div>
  
</article>








  
    <article id="post-enroll-apple-developer-note" class="article article-type-post" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/2014/02/26/enroll-apple-developer-note/" class="article-date">
      <time datetime="2014-02-26T09:25:00.000Z" itemprop="datePublished">2014-02-26</time>
</a>
    </div>
  
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2014/02/26/enroll-apple-developer-note/">注册个人版苹果开发者须知</a>
    </h1>
  

      </header>
      
    
    <div class="article-entry" itemprop="articleBody">
      
          
        <p>最近，注册个人开发者账号，前面的注册流程网上一大推，我在这里就不再重复了。</p>
<p>首先说说注册前，需要注意的地方:</p>
<ol>
<li>需要访问appleid.apple.com对自己的账号中的地址信息进行修改，修改成你自己身份证上面的地址.</li>
<li>如果你的appleid已经加入到别的team里面的话，那么很抱歉，你需要使用一个新的appleid进行注册开发者计划。(或者可以从原来的team中移除，然后可以继续注册)</li>
</ol>
<p>下面来说说我的情况：</p>
<p>我的appleid已经加入到公司的team中了，然后我再用这个账号注册了开发者计划，在激活的时候，激活页面始终无法正常的打开，电话咨询客服人员，然后客服发来一个链接:developer.apple.com/membercenter/uploadDocs.action,要求我上传身份证的信息。然后我打开这个页面，登陆进去，还是无法打开页面，显示:</p>
<blockquote>
<p>This page cannot be viewed.</p>
<p>we’re unable to process your request due to an unknown error. </p>
<p>If you require assistance, please contact Apple Developer Support.</p>
</blockquote>
<img src="/images/2014/02/26/enroll-apple-developer-note-0.png">
<p>希望你们在注册的时候能够比较的顺利。</p>

      
    </div>
    
    <div class="article-info article-info-index">
      
      
    <div class="article-category tagcloud">
    <a class="article-category-link" href="/categories/iOS/">iOS</a>
    </div>


      
      
      <div class="clearfix"></div>
    </div>
    
  </div>
  
</article>








  
    <article id="post-ios7-day-by-day-day23-multipeer-connectivity" class="article article-type-post" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/2014/01/26/ios7-day-by-day-day23-multipeer-connectivity/" class="article-date">
      <time datetime="2014-01-26T07:44:00.000Z" itemprop="datePublished">2014-01-26</time>
</a>
    </div>
  
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2014/01/26/ios7-day-by-day-day23-multipeer-connectivity/">天天品尝iOS7甜点 :: Day 23 :: Multipeer Connectivity</a>
    </h1>
  

      </header>
      
    
    <div class="article-entry" itemprop="articleBody">
      
          
              <p>这篇文章是天天品尝iOS7甜点系列的一部分，你可以查看完整的系列目录：<a href="/blog/2014/01/06/introducting-ios7-day-by-day/">天天品尝iOS7甜点</a></p>
<hr/>

<h3 id="Introducation-介绍"><a href="#Introducation-介绍" class="headerlink" title="Introducation - 介绍"></a>Introducation - 介绍</h3><p>在iOS7中介绍了一个全新的框架 MultipeerConnectivity。这个是代表这传统苹果中第一个困难问题:考虑到移动设备都有多种不同的无线电技术建成的,当然,他们应该能够相互通信而无需通过互联网发送数据。在过去就可以创建一个特别的wifi网络,在蓝牙或对设备,但这些选项提供了一个非常友好的方法。伴随MultipeerConnectivity框架的变化——设置网络脱离用户和开发人员,通过与技术无关的API,而通信发生。</p>
<p>框架在现实中无论技术具备——无论是蓝牙,或wifi,要么使用基础设施网络,或特别的网络如果设备不共享相同的网络。这是真正的,用户就可以选择它周围的设备希望连接到框架将处理所有的休息。甚至能够使用一个节点作为一个路由器2节点之间相互看不到mesh-network的方式。</p>
<p>在今天的帖子里,我们会通过代码的运行需要建立一个multipeer这样的网络,以及如何在设备之间发送数据。</p>
<p>本章的实例程序能够在github上面进行访问，访问地址:<a href="https://github.com/ShinobiControls/iOS7-day-by-day">github.com/ShinobiControls/iOS7-day-by-day</a></p>
<h3 id="Browsing-for-devices-查找浏览设备"><a href="#Browsing-for-devices-查找浏览设备" class="headerlink" title="Browsing for devices - 查找浏览设备"></a>Browsing for devices - 查找浏览设备</h3><p>为了发送数据,有必要建立一个设备之间的连接,这是完成一个设备“浏览”适当的设备范围内。可以请求发送到这些设备之一,它将提醒用户,允许他们接受或拒绝连接。如果连接被接受,那么框架将建立链接,允许数据被转移。</p>
<p>有2种方法可以浏览本地设备——一个视觉的,和一个可编程的版本。我们只是去看看视觉的方法。</p>
          
      
    </div>
    
    <div class="article-info article-info-index">
      
      
    <div class="article-category tagcloud">
    <a class="article-category-link" href="/categories/iOS7/">iOS7</a><a class="article-category-link" href="/categories/iOS7/翻译/">翻译</a><a class="article-category-link" href="/categories/iOS7/翻译/iOS7-Day-by-Day/">iOS7 Day-by-Day</a>
    </div>


      
      
        <p class="article-more-link">
          <a href="/2014/01/26/ios7-day-by-day-day23-multipeer-connectivity/#more">more >></a>
        </p>
      
      <div class="clearfix"></div>
    </div>
    
  </div>
  
</article>








  
  
    <nav id="page-nav">
      <span class="page-number current">1</span><a class="page-number" href="/page/2/">2</a><a class="page-number" href="/page/3/">3</a><span class="space">&hellip;</span><a class="page-number" href="/page/6/">6</a><a class="extend next" rel="next" href="/page/2/">Next &raquo;</a>
    </nav>
  
</div>
      <footer id="footer">
    <div class="outer">
        <div id="footer-info">
            <div class="footer-left">
                &copy; 2016 Kingiol
            </div>
            <div class="footer-right">
                <a href="http://hexo.io/" target="_blank" title="快速、简洁且高效的博客框架">Hexo</a>  Theme <a href="https://github.com/MOxFIVE/hexo-theme-yelee" target="_blank" title="简而不减 Hexo 双栏博客主题">Yelee</a> by MOxFIVE
            </div>
        </div>
        
            <div class="visit">
                
                    <span id="busuanzi_container_site_pv" style='display:none'>
                        <span id="site-visit" >本站到访数: 
                            <span id="busuanzi_value_site_uv"></span>
                        </span>
                    </span>
                
                
                    <span>, </span>
                
                
                    <span id="busuanzi_container_page_pv" style='display:none'>
                        <span id="page-visit">本页阅读量: 
                            <span id="busuanzi_value_page_pv"></span>
                        </span>
                    </span>
                
            </div>
        
    </div>
</footer>
    </div>
    
<script data-main="/js/main.js" src="//cdn.bootcss.com/require.js/2.1.22/require.min.js"></script>

    <script>
        $(document).ready(function() {
            var iPad = window.navigator.userAgent.indexOf('iPad');
            if (iPad > -1 || $(".left-col").css("display") === "none") {
                var bgColorList = ["#9db3f4", "#414141", "#e5a859", "#f5dfc6", "#c084a0", "#847e72", "#cd8390", "#996731"];
                var bgColor = Math.ceil(Math.random() * (bgColorList.length - 1));
                $("body").css({"background-color": bgColorList[bgColor], "background-size": "cover"});
            }
            else {
                var backgroundnum = 5;
                var backgroundimg = "url(/background/bg-x.jpg)".replace(/x/gi, Math.ceil(Math.random() * backgroundnum));
                $("body").css({"background": backgroundimg, "background-attachment": "fixed", "background-size": "cover"});
            }
        })
    </script>


<!-- Google Analytics -->
<script type="text/javascript">
(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
})(window,document,'script','//www.google-analytics.com/analytics.js','ga');

ga('create', 'UA-43490357-1', 'auto');
ga('send', 'pageview');

</script>
<!-- End Google Analytics -->



<div class="scroll" id="scroll">
    <a href="#" title="返回顶部"><i class="fa fa-arrow-up"></i></a>
    <a href="#comments" title="查看评论"><i class="fa fa-comments-o"></i></a>
    <a href="#footer" title="转到底部"><i class="fa fa-arrow-down"></i></a>
</div>

<script async src="https://dn-lbstatics.qbox.me/busuanzi/2.3/busuanzi.pure.mini.js">
</script>
  </div>
</body>
</html>